---
title: Set the DA Footprint Gas Scalar
description: Learn how to set a Data Availability (DA) Footprint on your OP-Stack Chain
---

## Overview

| Parameter | Type | Default | Recommended | Units |
| ---------- | ---- | -------- | ------------ | ------------ |
| `daFootprintGasScalar` | Number | 0 (400)  | 400 | gas per byte |

<Warning>
The default value of 0 is the same as setting the scalar to 400. In order to effectively disable this feature, set the scalar to a very low value such as 1.
</Warning>

The <strong>Data Availability (DA) Footprint</strong> feature was introduced in the <strong>Jovian</strong> hardfork to limit the total amount of estimated compressed transaction data that can fit into a block.
When an OP Stack chain receives more calldata heavy transactions than can fit into the L1s available blob space, the [Batcher can throttle the chains capacity](https://docs.optimism.io/chain-operators/guides/configuration/batcher#batcher-sequencer-throttling). 

However, continuous batcher throttling may cause the base fee to drop to the [minimum base fee](https://docs.optimism.io/chain-operators/guides/features/setting-min-base-fee),
causing unnecessary losses for the chain operator and negative user experiences such as priority fee auctions. Limiting the amount of calldata taken up by transactions in an block using the DA Footprint can reduce the need for batcher throttling and the issues that come from throttling.

For every transaction, other than [deposit transactions](https://docs.optimism.io/reference/glossary#deposited-transaction), 
processed by an OP Stack chain, a resource called DA Footprint is tracked alongside the transaction's gas usage.
The DA Footprint can be configured via the `daFootprintGasScalar` variable in the `SystemConfig` contract on the L1 chain.
The DA Footprint is automatically calculated for every transaction first by calculating a `daUsageEstimate` for that transaction:

```python
daUsageEstimate = max(
          minTransactionSize,
          (intercept + fastlzCoef * tx.fastlzSize) // 1e6
      )
```

then the `daUsageEstimate` is then multiplied by the `daFootprintGasScalar` to get the `daFootprint` for that individual transaction.

```python
      daFootprint += daUsageEstimate * daFootprintGasScalar
```

The `daFootprint` for all the transactions in a block are then added together to calculate that blocks total `daFootprint`.
With the blocks total `daFootprint` calculated:

<Info>
- The blocks total `daFootprint` must stay below the `gasLimit` for the chain.
- The `blobGasUsed` property of each block header is set to that block's `daFootprint`
- The base fee update calculation then uses `gasMetered := max(gasUsed, blobGasUsed)`
</Info>

The steps below explain how to update the `daFootprintGasScalar` parameter on-chain using the `SystemConfig` contract.

<Warning>
  - If no limit is set, or the value 0 is set for the daFootprintGasScalar in the SystemConfig, the default value of 400 is used
  - In order to effectively disable this feature, set the scalar to a very low value such as 1.
  - Setting the `daFootprintGasScalar` too high may exclude too many transactions from your blocks.
  - Setting the `daFootprintGasScalar` too low may prove ineffective at preventing batcher throttling or protecting against continuous DA heavy transactions.
  - When a chain's gas limit is changed, the DA footprint scales proportionally by design. However you want to retain the same absolute DA footprint limit, then you must the also change the `daFootprintGasScalar`.
</Warning>


## How to Update the daFootprintGasScalar

<Steps>
  <Step title="Find your SystemConfig contract address">
    The [SystemConfig](https://specs.optimism.io/protocol/system-config.html) contract stores configurable protocol parameters such as gas limits and fee settings.  
    You can find its proxy address in the [state.json generated by op-deployer](https://docs.optimism.io/chain-operators/tutorials/create-l2-rollup/op-deployer-setup#deploy-l1-contracts).
  </Step>

  <Step title="Call the setDAFootprintGasScalar() method">
   <Info>
    The [SystemConfig owner](https://docs.optimism.io/chain-operators/reference/privileged-roles#system-config-owner) is the only address that can make these changes.
    </Info>
    To update the `daFootprintGasScalar`, call the following method on the `SystemConfig` contract:

    `setDAFootprintGasScalar(uint16 daFootprintGasScalar) external onlyOwner;`
   
    Example (using [cast](https://getfoundry.sh/cast/reference/cast/)):

    ```
    cast send <SYSTEM_CONFIG_PROXY_ADDRESS> "daFootprintGasScalar(uint16)" 405 
    ```
  </Step>

  <Step title="Verify the new value">
    After the transaction confirms, verify the current value by calling the following getter method on the `SystemConfig` contract:
    
    `function daFootprintGasScalar() external view returns (uint16);`

    Example (using [cast](https://getfoundry.sh/cast/reference/cast/)):

    ```
    cast call <SYSTEM_CONFIG_PROXY_ADDRESS> "daFootprintGasScalar()"
    ```
  </Step>
</Steps>

---

## References

* [DA Footprint Configuration Spec](https://specs.optimism.io/protocol/jovian/system-config.html#da-footprint-configuration)
* [Jovian Upgrade Spec](https://specs.optimism.io/protocol/jovian/overview.html)
* [SystemConfig Contract Spec](https://specs.optimism.io/protocol/system-config.html)
* [Design Doc](https://github.com/ethereum-optimism/design-docs/blob/main/protocol/da-footprint-block-limit.md)