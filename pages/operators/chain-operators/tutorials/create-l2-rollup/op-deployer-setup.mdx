---
title: Spin up op-deployer
description: Install op-deployer, prepare your environment, and set up the foundation for your rollup deployment.
lang: en-US
content_type: tutorial
topic: create-l2-rollup-setup
personas:
  - chain-operator
categories:
  - testnet
  - chain-deployment
  - op-deployer
is_imported_content: 'false'
---

import {Callout, Steps, Card, Tabs} from 'nextra/components'

# Spin up op-deployer

Welcome to the first step of creating your own L2 rollup testnet! In this section, you'll install the op-deployer tool and prepare your environment for the deployment.

<Callout type="info">
  **Step 1 of 5**: This tutorial is designed to be followed step-by-step. Each step builds on the previous one.
</Callout>

## About op-deployer

`op-deployer` simplifies the process of deploying the OP Stack. It works similarly to [Terraform](https://www.terraform.io/) - you define a declarative config file called an "**intent**," then run a command to apply it. `op-deployer` compares your chain's current state against the intent and makes the necessary changes to match.

## Installation

There are a couple of ways to install `op-deployer`:

<Tabs items={['Download pre-built binary (Recommended)', 'Build from source']}>
  <Tabs.Tab>
    The recommended way to install `op-deployer`, is to download the latest release from the monorepo's [release page](https://github.com/ethereum-optimism/optimism/releases).

    1.  Go to [https://github.com/ethereum-optimism/optimism/releases](https://github.com/ethereum-optimism/optimism/releases)
    2.  Find the latest release that includes `op-deployer`
    3.  Under **assets**, download the binary that matches your operating system:

    *   `op-deployer-linux-amd64` for Linux
    *   `op-deployer-darwin-amd64` or `op-deployer-darwin-arm64` for macOS
    *   `op-deployer-windows-amd64.exe` for Windows

    4.  Extract the binary to a location on your system PATH
    5.  Verify installation, run this command to verify that you have it installed.

    ```bash
    op-deployer --version
    ```
  </Tabs.Tab>

  <Tabs.Tab>
    To install from source, you will need [Go](https://go.dev/doc/install), `just`, and `git`.
    After installing all of that, run following:

    ```bash

    git clone https://github.com/ethereum-optimism/optimism.git # you can skip this if you already have the repo
    cd optimism/op-deployer
    just build
    cp ./bin/op-deployer /usr/local/bin/op-deployer # or any other directory in your $PATH

    # Verify installation, run this command to verify that you have it installed.
    op-deployer --version
    ```
  </Tabs.Tab>
</Tabs>

## Deployment usage

<Callout type="info">
  Deploying an OP Stack chain involves deploying multiple contracts, which can consume a substantial amount of gas. On testnets like Sepolia, costs may fluctuate significantly depending on network congestion. We recommend ensuring your deployer wallet has a buffer of **at least 1.5 to  3.5 ETH** , depending on gas prices and configuration. Always check current gas estimates before deploying.
</Callout>

The base use case for `op-deployer` is deploying new OP Chains. This process is broken down into three steps:

<Callout type="info">
  op-deployer uses a declarative intent file to determine how a new chain should be configured.
  Then, it runs through a deployment pipeline to actually deploy the chain.
</Callout>

<Steps>
  ### `init`: configure your chain

  To get started with `op-deployer`, create an intent file that defines your desired chain configuration. Use the built-in `op-deployer` utility to generate this file:

  ```bash
  op-deployer init \
    --l1-chain-id 11155111 \
    --l2-chain-ids <comma-separated list of chain IDs for your L2s> \
    --workdir .deployer \
    --intent-type <standard|custom|standard-overrides>

  ```

  *   Replace `<l2-chain-id>` with the exact value.
  *   The `--workdir` flag specifies the output directory for the generated intent file and related configs. You can name this directory anything you like.

  This command will create a directory called `.deployer` in your current working directory containing the intent file and an empty `state.json` file. `state.json` is populated with the results of your deployment, and never needs to be edited directly.

  Your intent file will need to be modified to your parameters, but it will initially look something like this:

  <Callout type="warning">
    Do not use the default addresses in the intent for a production chain! They are generated from the `test... junk`
    mnemonic. **Any funds they hold will be stolen on a live chain.**
  </Callout>

  ```toml
  deploymentStrategy = "live"
  configType = "standard-overrides"
  l1ChainID = 11155111# The chain ID of Sepolia (L1) you'll be deploying to.
  fundDevAccounts = true# Whether or not to fund dev accounts using the test... junk mnemonic on L2.
  l1ContractsLocator = "tag://op-contracts/v1.8.0-rc.4"# L1 smart contracts versions
  l2ContractsLocator = "tag://op-contracts/v1.7.0-beta.1+l2-contracts"# L2 smart contracts versions# Delete this table if you are using the shared Superchain contracts on the L1# If you are deploying your own SuperchainConfig and ProtocolVersions contracts, fill in these details
  [superchainRoles]
    proxyAdminOwner = "0x1eb2ffc903729a0f03966b917003800b145f56e2"
    protocolVersionsOwner = "0x79add5713b383daa0a138d3c4780c7a1804a8090"
    guardian = "0x7a50f00e8d05b95f98fe38d8bee366a7324dcf7e"

  # List of L2s to deploy. op-deployer can deploy multiple L2s at once
  [[chains]]
  # Your chain's ID, encoded as a 32-byte hex string
    id = "0x00000000000000000000000000000000000000000000000000000a25406f3e60"
  # Update the fee recipient contract
    baseFeeVaultRecipient = "0x100f829718B5Be38013CC7b29c5c62a08D00f1ff"
    l1FeeVaultRecipient = "0xbAEaf33e883068937aB4a50871f2FD52e241013A"
    sequencerFeeVaultRecipient = "0xd0D5D18F0ebb07B7d728b14AAE014eedA814d6BD"
    eip1559DenominatorCanyon = 250
    eip1559Denominator = 50
    eip1559Elasticity = 6
  # Various ownership roles for your chain. When you use op-deployer init, these roles are generated using the# test... junk mnemonic. You should replace these with your own addresses for production chains.
    [chains.roles]
      l1ProxyAdminOwner = "0xdf5a644aed1b5d6cE0DA2aDd778bc5f39d97Ac88"
      l2ProxyAdminOwner = "0xC40445CD88dDa2A410F86F6eF8E00fd52D8381FD"
      systemConfigOwner = "0xB32296E6929F2507dB8153A64b036D175Ac6E89e"
      unsafeBlockSigner = "0xA53526b516df4eEe3791734CE85311569e0eAD78"
      batcher = "0x8680d36811420359093fd321ED386a6e76BE2AF3"
      proposer = "0x41b3B204099771aDf857F826015703A1030b6675"
      challenger = "0x7B51A480dAeE699CA3a4F68F9AAA434452112eF7"

  ```

  <Callout type="info">
    Before you can use your intent file for a deployment, you will need to update all zero values to whatever is appropriate for your chain.
    For dev environments, it is ok to use all EOAs/hot-wallets.
  </Callout>

  **Production setup**

  In production environments, you should use a more secure setup with cold-wallet multisigs (e.g. Gnosis Safes) for the following:

  *   `baseFeeVaultRecipient`
  *   `l1FeeVaultRecipient`
  *   `sequencerFeeVaultRecipient`
  *   `l1ProxyAdminOwner`
  *   `l2ProxyAdminOwner`
  *   \`systemConfigOwn\`\`

  HSMs (hardware security modules) are recommended for the following hot-wallets:

  *   `unsafeBlockSigner`
  *   `batcher`
  *   `proposer`
  *   `challenger`

  #### Understanding the intent.toml fields

  <details>
    <summary>Here's an explanation of the key fields in the intent file:</summary>

    **Global configuration:**

    *   `deploymentStrategy`: Used to deploy both to live chains and L1 genesis files. Valid values are `live` and `genesis`.
    *   `configType`: Type of configuration to use ("standard-overrides" is most common)
    *   `l1ChainID`: The chain ID of the L1 network you're deploying to
    *   `fundDevAccounts`: Whether to fund development accounts on L2 (set to false for production)
    *   `l1ContractsLocator`: The version of L1 contracts to deploy
    *   `l2ContractsLocator`: The version of L2 contracts to deploy

    **Superchain roles:**

    *   `proxyAdminOwner`: Address that can upgrade Superchain-wide contracts
    *   `protocolVersionsOwner`: Address that can update protocol versions
    *   `guardian`: Address authorized to pause L1 withdrawals from contracts, blacklist dispute games, and set the respected game type in the `OptimismPortal`

    **Chain-specific configuration:**

    *   `id`: Unique identifier for your chain
    *   `baseFeeVaultRecipient`: Address that represents the recipient of fees accumulated in the `BaseFeeVault`
    *   `l1FeeVaultRecipient`: Address that represents the recipient of fees accumulated in the `L1FeeVault`
    *   `sequencerFeeVaultRecipient`: Address that receives sequencer fees
    *   `eip1559DenominatorCanyon`, `eip1559Denominator`, `eip1559Elasticity`: Parameters for fee calculation

    **Chain roles:**

    *   `l1ProxyAdminOwner`: Address authorized to update the L1 Proxy Admin
    *   `l2ProxyAdminOwner`: Address authorized to upgrade protocol contracts via calls to the `ProxyAdmin`. This is the aliased L1 ProxyAdmin owner address.
    *   `systemConfigOwner`: Address authorized to change values in the `SystemConfig` contract. All configuration is stored on L1 and picked up by L2 as part of the [derivation](https://specs.optimism.io/protocol/derivation.html) of the L2 chain
    *   `unsafeBlockSigner`: Address which authenticates the unsafe/pre-submitted blocks for a chain at the P2P layer
    *   `batcher`: Address that batches transactions from L2 to L1
    *   `proposer`: Address which can create and interact with [permissioned dispute games](https://specs.optimism.io/fault-proof/stage-one/bridge-integration.html#permissioned-faultdisputegame) on L1.
    *   `challenger`: Address Account which can interact with existing permissioned dispute games
  </details>

  #### Working with artifacts

  Artifacts are the outputs generated by `op-deployer` when configuring a chain deployment.\
  They typically include compiled contract binaries, deployment metadata, and chain configuration files (like genesis, or rollup).\
  These files serve as the source of truth for deploying, upgrading, or verifying an OP Stack chain.
  We'll cover how to generate and retrieve artifacts later in this tutorial.

  The `artifacts-locator` parameter specifies where the contract deployment artifacts are located.\
  There are several ways to provide artifacts:

  <Tabs items={['Using local files', 'Using tagged artifacts']}>
    <Tabs.Tab>
      To use local artifacts (recommended for production or if you're experiencing issues with remote artifacts):

      1.  Clone the contracts repository:

          ```bash
          git clone https://github.com/ethereum-optimism/optimism.git
          cd optimism
          git checkout v1.8.0-rc.4  # Use the desired version
          ```

      2.  Build the contract artifacts:

          ```bash
          cd packages/contracts-bedrock
          just build
          ```

      3.  Use the local path in your command, referencing the artifacts from:\
          `<monorepo-root>/packages/contracts-bedrock/forge-artifacts`
    </Tabs.Tab>

    <Tabs.Tab>
      For development or testing, you can try using tagged artifacts:

      ```bash
      --artifacts-locator tag://op-contracts/v1.8.0-rc.4
      ```

      If you encounter the error `Application failed: failed to parse artifacts URL: unsupported tag`, you'll need to use the local files method described above.
      If you use an invalid tag, the command will display all valid options.
    </Tabs.Tab>
  </Tabs>

  #### Contract locator schemes

  op-deployer uses contract locators to find contract artifacts to deploy.
  Locators are just URLs under the hood.
  The `l1ContractsLocator` and `l2ContractsLocator` fields support several schemes for specifying where to find the contract implementations:

  *   `tag://` - References a specific tagged release of the contracts (e.g., `tag://op-contracts/v1.8.0-rc.4`). In this case, the contracts bytecode will be downloaded from a fixed bytecode bundle on GCS.
  *   `file://` - Points to a directory on local disk containing the artifacts.
      This is useful for local development, since you can point it at your local monorepo
      e.g. `file://<path-to-repo-root>/packages/contracts-bedrock/forge-artifacts`
  *   `http://` or `https://` - Points to a target directory containing contract artifacts. The URL should directly reference the directory containing the `forge-artifacts` directory, in this case, the bytecode will be downloaded from the URL specified.

  <Callout type="info">
    When using any scheme other than tag://, you must set configType to either custom or standard-overrides in your intent file.
  </Callout>

  For example:

  ```toml
  # When using tag:// scheme
  configType = "standard-overrides"
  l1ContractsLocator = "tag://op-contracts/v1.8.0-rc.4"
  l2ContractsLocator = "tag://op-contracts/v1.7.0-beta.1+l2-contracts"

  # When using other schemes (file://, http://, https://)
  configType = "custom"  # or "standard-overrides"
  l1ContractsLocator = "file:///path/to/local/op-contracts/v1.8.0-rc.4/forge-artifacts"
  l2ContractsLocator = "<https://example.com/op-contracts/v1.7.0-beta.1+l2-contracts.tar.gz>"
  ```

  By default, `op-deployer` will fill in all other configuration variables with those that match the [standard configuration](https://specs.optimism.io/protocol/configurability.html?utm_source=op-docs\&utm_medium=docs). You can override these default settings by adding them to your intent file using the table below:

  ```toml
  [globalDeployOverrides]
    l2BlockTime = 1# 1s L2blockTime is also standard, op-deployer defaults to 2s
  ```

  You can also do chain by chain configurations in the `chains` table.

  ### `apply`: deploy your chain

  <Callout type="info">
    Hardware wallets are not supported, but you can use ephemeral hot wallets since this deployer key has no privileges.
  </Callout>

  Now that you've created your intent file, you can apply it to your chain to deploy the L1 smart contracts:

  ```bash
  op-deployer apply --workdir .deployer --l1-rpc-url <rpc-url> --private-key <private key hex>
  ```

  *   Replace `<rpc-url>` with your `L1_RPC_URL` and `<private key>` with your private key

  This command will deploy the OP Stack to L1. It will deploy all L1 contracts for each L2 specified in the intent file.

  Superchain configuration will be set to the Superchain-wide defaults - i.e., your chain will be opted into the [Superchain pause](https://specs.optimism.io/protocol/superchain-config.html#pausability) and will use the same [protocol versions](https://github.com/ethereum-optimism/specs/blob/main/specs/protocol/superchain-upgrades.md) address as other chains on the Superchain.
  You will need to specify additional arguments depending on what you're trying to do.
  See below for a reference of each supported CLI arg:

  *   Deployment targets:

      The `--deployment-target` flag specifies where to deploy:

      *   `live`(default): Deploys directly to a live L1 network. Requires `-l1-rpc-url` and `-private-key`.
      *   `genesis`: Generates an L1 genesis file for local testing or development.
      *   `calldata`: Produces calldata for multisig wallets, enabling offline deployment.
      *   `noop`: Performs a dry-run without actual deployment, useful for testing configurations.

      Choose the deployment target that best fits your use case.

  {/* ### `verify`: verify contract source code on block explorers //THIS IS NO LONGER SUPPORTED

  After deploying your contracts, you can verify them on block explorers like Etherscan:

  ```bash
  op-deployer verify \
    --l1-rpc-url <l1 rpc url> \
    --input-file <filepath to input .json file> \
    --etherscan-api-key <your free etherscan api key> \
    --artifacts-locator <file:///path/to/artifacts>
  ```

  **Common options:**

  *   `-l1-rpc-url`: RPC URL for the L1 chain
  *   `-etherscan-api-key`: API key for the block explorer (e.g., from Etherscan)
  *   `-artifacts-locator`: Path or plugin to locate contract artifacts
  *   `-input-file`: Path to a JSON file containing deployment data:
      *   Create an `input.json` file in the same directory(`./deployer`).
      *   Navigate to your `state.json` file and locate the `implementationsDeployment` object.
      *   Copy everything inside the `implementationsDeployment` object (without the object name itself) and paste it into your new `input.json` file.

  <Callout type="info">
    You don't need to specify a `--workdir`, op-deployer will automatically look for deployment artifacts from the deploy step, unless overridden.
  </Callout>

  **Example:**

  ```bash
  op-deployer verify \
    --l1-rpc-url <https://sepolia.infura.io/v3/YOUR_INFURA_KEY> \
    --etherscan-api-key <YOUR_ETHERSCAN_API_KEY> \
    --input-file <file_path_to_input.json | e.g .deployer/input.json> \
    --artifacts-locator <tag://op-contracts/v3.0.0-rc.2>
  ``` */}

  ### `inspect`: generate genesis files and chain information

  <Callout type="info">
    To add your chain to the [Superchain Registry](https://github.com/ethereum-optimism/superchain-registry) you will need to provide the chain artifacts. To get these chain artifacts, you will need to write the output of these commands to new files.
  </Callout>

  Inspect the `state.json` file by navigating to your working directory. With the contracts deployed, generate the genesis and rollup configuration files by running the following commands:

  ```bash
  op-deployer inspect genesis --workdir .deployer <l2-chain-id> > .deployer/genesis.json
  op-deployer inspect rollup --workdir .deployer <l2-chain-id> > .deployer/rollup.json
  ```

  Now that you have your `genesis.json` and `rollup.json` you can spin up a node on your network. You can also use the following inspect subcommands to get additional chain artifacts:

  ```bash
  op-deployer inspect l1 --workdir .deployer <l2-chain-id># outputs all L1 contract addresses for an L2 chain
  op-deployer inspect deploy-config --workdir .deployer <l2-chain-id># outputs the deploy config for an L2 chain
  op-deployer inspect l2-semvers --workdir .deployer <l2-chain-id># outputs the semvers for all L2 chains
  ```
</Steps>

## What's Next?

Great! You now have `op-deployer` installed and ready to use.
Since op-deployer handles L1 smart contract deployment automatically, you can now move on to spin up the sequencer for your rollup.

<Card title="Spin up sequencer →" href="./op-geth-setup">
  **Next**: Set up op-geth and op-node, essential building blocks of the execution and consensus layers in your rollup.
</Card>

***

## Need Help?

*   **Community Support**: Join the [Optimism Discord](https://discord.gg/optimism)
*   **op-deployer Repository**: [GitHub](https://github.com/ethereum-optimism/optimism/tree/develop/op-deployer/cmd/op-deployer)
*   **OPCM Documentation**: [OP Contracts Manager](/stack/opcm)
