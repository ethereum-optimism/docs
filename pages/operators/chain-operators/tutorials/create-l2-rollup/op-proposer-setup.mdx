---
title: Spin up proposer
lang: en-US
description: Learn how to set up and configure an OP Stack proposer to post L2 state roots.
content_type: tutorial
topic: proposer-setup
personas:
  - chain-operator
categories:
  - testnet
  - mainnet
  - op-proposer
  - state-commitment
  - l2-output-submission
  - withdrawal-verification
is_imported_content: 'false'
---

import { Callout, Steps, Card, Tabs } from 'nextra/components'

# Spin up proposer

After you have spun up your sequencer and batcher, you need to attach a proposer to post your L2 state roots data back onto L1 so we can prove withdrawal validity. The proposer is a critical component that enables trustless L2-to-L1 messaging and creates the authoritative view of L2 state from L1's perspective.

<Callout type="info">
  **Step 4 of 5**: This tutorial is designed to be followed step-by-step. Each step builds on the previous one.
</Callout>

This guide assumes you already have a functioning sequencer, batcher, and the necessary L1 contracts deployed using [`op-deployer`](./op-deployer-setup). If you haven't set up your sequencer and batcher yet, please refer to the [sequencer guide](./op-geth-setup) and [batcher guide](./op-batcher-setup) first.

To see configuration info for the proposer, check out the [configuration page](/operators/chain-operators/configuration/proposer).

## Understanding the proposer's role

The proposer (`op-proposer`) serves as a crucial bridge between your L2 chain and L1. Its primary responsibilities include:

*   **State commitment**: Proposing L2 state roots to L1 at regular intervals
*   **Withdrawal enablement**: Providing the necessary commitments for users to prove and finalize withdrawals

The proposer creates dispute games via the `DisputeGameFactory` contract.

## Prerequisites

Before setting up your proposer, ensure you have:

**Running infrastructure:**

*   An operational sequencer node
*   Access to a L1 RPC endpoint

**Network information:**

*   Your L2 chain ID and network configuration
*   L1 network details (chain ID, RPC endpoints)

## Software installation

### Finding the current stable releases

To ensure you're using the latest compatible versions of OP Stack components, always check the official [releases page](https://github.com/ethereum-optimism/optimism/releases).

Look for the latest `op-proposer/v*` release that's compatible with your sequencer setup.

<Callout type="info">
  This guide uses `op-proposer/v1.10.0` which is compatible with op-node/v1.13.3 and op-geth/v1.101511.1 from the sequencer setup.
  Always check the [release notes](https://github.com/ethereum-optimism/optimism/releases) for compatibility information.
</Callout>

For setting up the proposer, we recommend building from source as it provides better control and helps with debugging. Docker alternative is also provided.

<Tabs items={['Build from source', 'Using Docker']}>
  <Tabs.Tab>
    Building from source gives you full control over the binaries and is the preferred approach for this guide.

    <Steps>
      ### Clone and build op-proposer

      ```bash
      # If you don't already have the optimism repository from the sequencer setup
      git clone https://github.com/ethereum-optimism/optimism.git
      cd optimism

      # Checkout the latest release tag
      git checkout op-proposer/v1.10.0

      # Build op-proposer
      cd op-proposer
      just

      # Binary will be available at ./bin/op-proposer
      ```

      ### Verify installation

      Run this command to verify the installation:

      ```bash
      ./bin/op-proposer --version
      ```
    </Steps>
  </Tabs.Tab>

  <Tabs.Tab>
    If you prefer containerized deployment, you can use the official Docker images and do the following:

    <Steps>
      ### Set up directory structure and copy configuration files

      ```bash
      # Create your proposer working directory
      mkdir ~/proposer-node
      cd ~/proposer-node

      # Copy configuration files from op-deployer output
      # Note: Adjust the path if your .deployer directory is located elsewhere
      cp ~/.deployer/state.json .

      # Extract the DisputeGameFactory address
      GAME_FACTORY_ADDRESS=$(cat state.json | jq -r '.opChainDeployments[0].DisputeGameFactoryProxy')
      echo "DisputeGameFactory Address: $GAME_FACTORY_ADDRESS"
      ```

      ### Create environment variables file

      ```bash
      # Create .env file with your actual values
      cat > .env << 'EOF'
      # L1 Configuration - Replace with your actual RPC URLs
      L1_RPC_URL=https://sepolia.infura.io/v3/YOUR_ACTUAL_INFURA_KEY

      # L2 Configuration - Should match your sequencer setup
      L2_RPC_URL=http://sequencer-node:8545
      ROLLUP_RPC_URL=http://sequencer-node:8547

      # Contract addresses - Extract from your op-deployer output
      GAME_FACTORY_ADDRESS=YOUR_ACTUAL_GAME_FACTORY_ADDRESS

      # Private key - Replace with your actual private key
      PRIVATE_KEY=0xYOUR_ACTUAL_PRIVATE_KEY

      # Proposer configuration
      PROPOSAL_INTERVAL=3600s
      GAME_TYPE=0
      POLL_INTERVAL=20s

      # RPC configuration
      PROPOSER_RPC_PORT=8560
      EOF
      ```

      **Important**: Replace ALL placeholder values (`YOUR_ACTUAL_*`) with your real configuration values.

      ### Create docker-compose.yml

      <Callout type="info">
        This configuration assumes your sequencer is running in a Docker container named `sequencer-node` on the same `op-stack` network.
        Make sure your sequencer is running before starting the proposer.
      </Callout>

      ```yaml
      version: '3.8'

      services:
        op-proposer:
          image: us-docker.pkg.dev/oplabs-tools-artifacts/images/op-proposer:v1.10.0
          volumes:
            - .:/workspace
          working_dir: /workspace
          ports:
            - "8560:8560"
          env_file:
            - .env
          command:
            - "op-proposer"
            - "--poll-interval=${POLL_INTERVAL}"
            - "--rpc.port=${PROPOSER_RPC_PORT}"
            - "--rpc.enable-admin"
            - "--rollup-rpc=${ROLLUP_RPC_URL}"
            - "--l1-eth-rpc=${L1_RPC_URL}"
            - "--private-key=${PRIVATE_KEY}"
            - "--game-factory-address=${GAME_FACTORY_ADDRESS}"
            - "--game-type=${GAME_TYPE}"
            - "--proposal-interval=${PROPOSAL_INTERVAL}"
            - "--num-confirmations=1"
            - "--resubmission-timeout=30s"
            - "--wait-node-sync=true"
            - "--log.level=info"
          restart: unless-stopped
          networks:
            - op-stack

      networks:
        op-stack:
          external: true
      ```

      ### Start the proposer service

      ```bash
      # Make sure your sequencer network exists
      docker network create op-stack 2>/dev/null || true

      # Start the proposer
      docker-compose up -d

      # View logs
      docker-compose logs -f op-proposer
      ```

      ### Verify proposer is running

      ```bash
      # Check proposer RPC is responding
      curl -X POST -H "Content-Type: application/json" \
        --data '{"jsonrpc":"2.0","method":"optimism_outputAtBlock","params":["latest"],"id":1}' \
        http://localhost:8560

      # Check container status
      docker-compose ps
      ```

      ### Final directory structure

      ```bash
      ~/proposer-node/
      ├── state.json             # Copied from ~/.deployer/
      ├── .env                   # Environment variables
      └── docker-compose.yml     # Docker configuration
      ```
    </Steps>

    Your proposer is now operational and will continuously submit state roots to L1!
  </Tabs.Tab>
</Tabs>

## Configuration setup

<Callout type="warning">
  The rest of this guide assumes you're using the **build-from-source** approach.
  If you chose Docker, all the necessary configuration was covered in the Docker tab above.
</Callout>

<Steps>
  ### Organize your workspace

  Create your proposer working directory at the same level as your sequencer:

  ```bash
  # Create proposer directory at the same level as your sequencer
  mkdir proposer-node
  cd proposer-node

  # Create scripts directory
  mkdir scripts
  ```

  ### Extract DisputeGameFactory address

  Extract the `DisputeGameFactory` contract address from your op-deployer output:

  ```bash
  # Navigate to proposer directory
  cd proposer-node

  # Copy the state.json from .deployer directory created while using op-deployer
  # Update the path if your .deployer directory is located elsewhere
  cp ../.deployer/state.json .

  # Extract the DisputeGameFactory address
  GAME_FACTORY_ADDRESS=$(cat state.json | jq -r '.opChainDeployments[0].disputeGameFactoryProxyAddress')
  echo "DisputeGameFactory Address: $GAME_FACTORY_ADDRESS"
  ```

  <Callout type="info">
    The proposer only needs the `DisputeGameFactory` address to submit proposals.
    The `GAME_TYPE=0` represents the standard fault proof game type.
  </Callout>

  ### Set up environment variables

  Create your `.env` file with the actual values:

  ```bash
  # Create .env file with your actual values
  # L1 Configuration - Replace with your actual RPC URL
  L1_RPC_URL=https://sepolia.infura.io/v3/YOUR_ACTUAL_INFURA_KEY

  # L2 Configuration - Should match your sequencer setup
  L2_RPC_URL=http://localhost:8545
  ROLLUP_RPC_URL=http://localhost:8547

  # Contract addresses - Extract from your op-deployer output
  GAME_FACTORY_ADDRESS=YOUR_ACTUAL_GAME_FACTORY_ADDRESS

  # Private key - Replace with your actual private key
  PRIVATE_KEY=0xYOUR_ACTUAL_PRIVATE_KEY

  # Proposer configuration
  PROPOSAL_INTERVAL=3600s
  GAME_TYPE=0
  POLL_INTERVAL=20s

  # RPC configuration
  PROPOSER_RPC_PORT=8560
  ```

  **Important**: Replace ALL placeholder values (`YOUR_ACTUAL_*`) with your real configuration values!

  ### Get your private key

  Get a private key from your wallet that will be used for submitting proposals to L1. This account needs sufficient ETH to pay for L1 gas costs.

  <Callout type="warning">
    The proposer account needs to be funded with ETH on L1 to pay for proposal submission transactions. Monitor this account's balance regularly as it will consume ETH for each proposal submission.
  </Callout>
</Steps>

## Proposer configuration

Create `scripts/start-proposer.sh`:

```bash
#!/bin/bash

source .env

# Path to the op-proposer binary we built
../optimism/op-proposer/bin/op-proposer \
  --poll-interval=$POLL_INTERVAL \
  --rpc.port=$PROPOSER_RPC_PORT \
  --rpc.enable-admin \
  --rollup-rpc=$ROLLUP_RPC_URL \
  --l1-eth-rpc=$L1_RPC_URL \
  --private-key=$PRIVATE_KEY \
  --game-factory-address=$GAME_FACTORY_ADDRESS \
  --game-type=$GAME_TYPE \
  --proposal-interval=$PROPOSAL_INTERVAL \
  --num-confirmations=1 \
  --resubmission-timeout=30s \
  --wait-node-sync=true \
  --log.level=info
```

Your final directory structure should look like:

```bash
~/
├── optimism/               # Contains op-proposer binary
├── sequencer-node/         # Your sequencer setup
├── .deployer/              # From op-deployer
│   └── state.json
└── proposer-node/          # Your proposer working directory
    ├── state.json          # Copied from .deployer
    ├── .env
    └── scripts/
        └── start-proposer.sh
```

## Starting the proposer

<Steps>
  ### Verify prerequisites

  Ensure your sequencer and op-node are running:

  ```bash
  # Test L1 connectivity
  # Note: Make sure you have exported these environment variables to your current shell session:
  # export L1_RPC_URL="https://sepolia.infura.io/v3/YOUR_KEY"
  # export L2_RPC_URL="http://localhost:8545"  
  # export ROLLUP_RPC_URL="http://localhost:8547"

  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
    $L1_RPC_URL

  # Test L2 connectivity  
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
    $L2_RPC_URL

  # Test rollup node connectivity
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"optimism_syncStatus","params":[],"id":1}' \
    $ROLLUP_RPC_URL
  ```

  ### Start the proposer

  ```bash
  # Make the script executable
  chmod +x scripts/start-proposer.sh

  # Start the proposer
  ./scripts/start-proposer.sh
  ```
</Steps>

## Verification

<Steps>
  ### Check proposer status

  Verify your proposer is working correctly:

  ```bash
  # Monitor proposal activity
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"optimism_outputAtBlock","params":["latest"],"id":1}' \
    http://localhost:8560

  # Check if your proposer address has enough ETH for gas
  # (Replace with your actual proposer address)
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_getBalance","params":["0xYOUR_PROPOSER_ADDRESS","latest"],"id":1}' \
    $L1_RPC_URL
  ```

  ### Verify proposer RPC

  ```bash
  # Check proposer RPC is responding
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"optimism_outputAtBlock","params":["latest"],"id":1}' \
    http://localhost:8560
  ```
</Steps>

Your proposer is now operational!

## What's Next?

Perfect! Your proposer is submitting state roots to L1. The final step is to set up the challenger to monitor and respond to disputes.

<Card title="Spin up challenger →" href="./op-challenger-setup">
  **Next**: Configure and start op-challenger to monitor disputes and maintain your rollup's security.
</Card>

***

## Need Help?

*   **Community Support**: Join the [Optimism Discord](https://discord.optimism.io)
*   **Proposer Configuration**: [op-proposer Configuration Reference](/operators/chain-operators/configuration/proposer)
*   **Dispute Games**: [Deploying Dispute Games with OPCM](/operators/chain-operators/tutorials/dispute-games)
